# -*- coding: utf-8 -*-
"""
Created on Wed Dec 10 12:57:40 2025

@author: Nikola Anđelić
"""

import matplotlib.pyplot as plt
from sklearn.datasets import make_blobs
import numpy as np

# ============================
# Step 1: Generate two datasets
# ============================

# Compact clusters
X1, y1 = make_blobs(
    n_samples=400,
    n_features=2,
    centers=3,
    cluster_std=0.5,
    random_state=0
)

# Diffuse clusters
X2, y2 = make_blobs(
    n_samples=400,
    n_features=2,
    centers=3,
    cluster_std=2.0,
    random_state=0
)

# Marker styles for grayscale plotting
markers = {0: "o", 1: "s", 2: "^"}
sizes   = {0: 50, 1: 70, 2: 90}
labels  = {0: "Cluster 0", 1: "Cluster 1", 2: "Cluster 2"}

# ============================
# Step 2: Create figure layout
# ============================

fig, axes = plt.subplots(1, 2, figsize=(13, 5), sharey=True)

# -------------------------------------
# Plot 1: cluster_std = 0.5 (compact)
# -------------------------------------
for cls in np.unique(y1):
    axes[0].scatter(
        X1[y1 == cls, 0],
        X1[y1 == cls, 1],
        marker=markers[cls],
        color="black",
        edgecolor="white",
        s=sizes[cls],
        alpha=0.85,
        label=labels[cls]
    )

axes[0].set_title("cluster_std = 0.5 (Compact Clusters)")
axes[0].set_xlabel("Feature 1")
axes[0].set_ylabel("Feature 2")
axes[0].grid(True, zorder=0)

# -------------------------------------
# Plot 2: cluster_std = 2.0 (diffuse)
# -------------------------------------
for cls in np.unique(y2):
    axes[1].scatter(
        X2[y2 == cls, 0],
        X2[y2 == cls, 1],
        marker=markers[cls],
        color="black",
        edgecolor="white",
        s=sizes[cls],
        alpha=0.85
    )

axes[1].set_title("cluster_std = 2.0 (Diffuse Clusters)")
axes[1].set_xlabel("Feature 1")
axes[1].grid(True, zorder=0)

# =================================
# Step 3: Create shared legend below
# =================================

# One legend for both subplots
handles, legend_labels = axes[0].get_legend_handles_labels()

fig.legend(
    handles,
    legend_labels,
    loc="upper center",
    bbox_to_anchor=(0.5, 0.15),
    ncol=3,
    frameon=True,
    shadow=True
)

plt.tight_layout(rect=[0, 0.1, 1, 1])  # leave space for legend

# ==============================
# Step 4: Save and show the plot
# ==============================

plt.savefig("cluster_std_effect.png", dpi=300, bbox_inches="tight")
plt.show()
